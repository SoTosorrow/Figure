<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>demo01</title>
</head>
<body>
    <center>
<video id="myVideo" width="500" height="400" src=""></video>
 <br>
 <canvas id="mycanvas" width="500" height="400"></canvas>
</center>
 <script>
     /**
      * https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Basic_animations
      */
    let myVideo = document.getElementById('myVideo');
    navigator.mediaDevices.getUserMedia({
        video: true
    }).then(function (mediaStream) {
        myVideo.srcObject = mediaStream;
        myVideo.onloadedmetadata = function () {
        myVideo.controls = "controls";
        myVideo.play();
        }
    });
    let gl = document.getElementById('mycanvas').getContext('webgl');

    // gl is the WebGLRenderingContext 
    const texture = gl.createTexture()
    gl.activeTexture(gl.TEXTURE0 + textureIndex);
    gl.bindTexture(gl.TEXTURE_2D, texture);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);

    // more info about these parameters in the webglfundamentals
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
    
    let video = document.getElementById('myVideo');
    let func = function () {
        window.requestAnimationFrame(func);
        canvas.drawImage(video, 0, 0, 500, 400);
        for(let i=0;i<50000;i++){
            canvas.fillRect(0,0,100,100);
        }

        canvas.putImageData(obj,0,0);
    }
    // func();

   
 </script>
</body>
</html> 